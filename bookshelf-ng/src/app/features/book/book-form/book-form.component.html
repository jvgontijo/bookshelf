<div class="row">
	<div class="col-md-8 offset-md-2">
		<h2 class="mb-3">{{ title }}</h2>

		<form [formGroup]="form" (ngSubmit)="onSubmit()">
			<div class="mb-3">
				<label for="title" class="form-label">Título</label>
				<input
					id="title"
					type="text"
					class="form-control"
					formControlName="title"
				/>
				<div
					class="text-danger small"
					*ngIf="hasError('title', 'required')"
				>
					Título é obrigatório.
				</div>
			</div>

			<div class="mb-3">
				<label for="publicationYear" class="form-label">Ano de publicação</label>
				<input
					id="publicationYear"
					type="number"
					class="form-control"
					formControlName="publicationYear"
				/>
			</div>

			<div class="mb-3">
				<label for="price" class="form-label">Preço (R$)</label>
				<input
					id="price"
					type="number"
					step="0.01"
					min="0"
					class="form-control"
					formControlName="price"
				/>
				<div
					class="text-danger small"
					*ngIf="hasError('price', 'required')"
				>
					Preço é obrigatório.
				</div>
			</div>

			<div class="mb-3">
				<label for="subjectId" class="form-label">Assunto</label>
				<select
					id="subjectId"
					class="form-select"
					formControlName="subjectId"
				>
					<option [ngValue]="null">Selecione...</option>
					<option *ngFor="let subject of subjects" [ngValue]="subject.id">
						{{ subject.description }}
					</option>
				</select>
				<div
					class="text-danger small"
					*ngIf="hasError('subjectId', 'required')"
				>
					Assunto é obrigatório.
				</div>
			</div>

			<div class="mb-3">
				<label for="authorIds" class="form-label">Autores</label>
				<select
					id="authorIds"
					class="form-select"
					multiple
					formControlName="authorIds"
				>
					<option *ngFor="let author of authors" [ngValue]="author.id">
						{{ author.name }}
					</option>
				</select>
				<div
					class="text-danger small"
					*ngIf="hasError('authorIds', 'required')"
				>
					Selecione pelo menos um autor.
				</div>
				<div class="form-text">
					Use CTRL+Clique ou SHIFT+Clique para selecionar múltiplos autores.
				</div>
			</div>

			<div class="d-flex justify-content-end gap-2 mt-4">
				<button
					type="button"
					class="btn btn-outline-secondary"
					(click)="onCancel()"
				>
					Cancelar
				</button>
				<button
					type="submit"
					class="btn btn-primary"
					[disabled]="form.invalid && submitted"
				>
					Salvar
				</button>
			</div>
		</form>
	</div>
</div>
